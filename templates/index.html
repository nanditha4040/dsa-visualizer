<!DOCTYPE html>
<html>
<head>
    <title>DSA Visualizer</title>

    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f4f6f8;
            margin: 0;
        }

        h1 {
            margin-top: 25px;
        }

        #controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin: 20px;
            flex-wrap: wrap;
        }

        button {
            padding: 8px 16px;
            border: none;
            background: #4CAF50;
            color: white;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
        }

        button:hover {
            background: #43a047;
        }

        select, input[type="range"] {
            cursor: pointer;
        }

        #bars {
            margin: 30px auto;
            border: 2px solid #ddd;
            background: white;
            padding: 20px;
            height: 320px;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            width: 80%;
            max-width: 900px;
        }
    </style>
</head>

<body>
    <h1>DSA Visualizer</h1>

    <div id="controls">
        <button onclick="generate()">Generate Array</button>

        <select id="algo">
            <option value="bubble">Bubble Sort</option>
            <option value="selection">Selection Sort</option>
            <option value="insertion">Insertion Sort</option>
            <option value="merge">Merge Sort</option>
            <option value="quick">Quick Sort</option>
        </select>

        <div>
            Speed: <span id="speedValue">200</span>
            <input type="range" id="speed" min="50" max="500" value="200">
        </div>

        <div>
            Size: <span id="sizeValue">8</span>
            <input type="range" id="size" min="5" max="30" value="8">
        </div>
    </div>

    <div id="bars"></div>

<script>
    const barsContainer = document.getElementById("bars");
    const speedSlider = document.getElementById("speed");
    const sizeSlider = document.getElementById("size");

    function getSpeed() {
        return 600 - speedSlider.value;
    }

    speedSlider.oninput = () =>
        document.getElementById("speedValue").innerText = speedSlider.value;

    sizeSlider.oninput = () =>
        document.getElementById("sizeValue").innerText = sizeSlider.value;

    function drawBars(arr, highlight = [], pivotIndex = null) {
        barsContainer.innerHTML = "";

        arr.forEach((value, index) => {
            const bar = document.createElement("div");
            bar.style.width = "20px";
            bar.style.height = (value * 15) + "px";
            bar.style.margin = "5px";
            bar.style.borderRadius = "4px";

            if (pivotIndex !== null && index === pivotIndex) {
                bar.style.background = "#f39c12";
            } else if (highlight.includes(index)) {
                bar.style.background = "#e74c3c";
            } else {
                bar.style.background = "#4CAF50";
            }

            barsContainer.appendChild(bar);
        });
    }

    async function bubbleSort(arr) {
        for (let i = 0; i < arr.length; i++) {
            for (let j = 0; j < arr.length - i - 1; j++) {
                drawBars(arr, [j, j + 1]);
                await new Promise(r => setTimeout(r, getSpeed()));

                if (arr[j] > arr[j + 1]) {
                    [arr[j], arr[j + 1]] = [arr[j + 1], arr[j]];
                    drawBars(arr, [j, j + 1]);
                    await new Promise(r => setTimeout(r, getSpeed()));
                }
            }
            drawBars(arr);
        }
    }

    async function selectionSort(arr) {
        for (let i = 0; i < arr.length; i++) {
            let minIndex = i;

            for (let j = i + 1; j < arr.length; j++) {
                drawBars(arr, [minIndex, j]);
                await new Promise(r => setTimeout(r, getSpeed()));

                if (arr[j] < arr[minIndex]) {
                    minIndex = j;
                }
            }

            if (minIndex !== i) {
                [arr[i], arr[minIndex]] = [arr[minIndex], arr[i]];
                drawBars(arr, [i, minIndex]);
                await new Promise(r => setTimeout(r, getSpeed()));
            }

            drawBars(arr);
        }
    }

    async function insertionSort(arr) {
        for (let i = 1; i < arr.length; i++) {
            let key = arr[i];
            let j = i - 1;

            drawBars(arr, [i]);
            await new Promise(r => setTimeout(r, getSpeed()));

            while (j >= 0 && arr[j] > key) {
                drawBars(arr, [j, j + 1]);
                await new Promise(r => setTimeout(r, getSpeed()));

                arr[j + 1] = arr[j];
                j--;

                drawBars(arr, [j + 1]);
                await new Promise(r => setTimeout(r, getSpeed()));
            }

            arr[j + 1] = key;
            drawBars(arr);
            await new Promise(r => setTimeout(r, getSpeed()));
        }
    }

    async function mergeSort(arr, l = 0, r = arr.length - 1) {
        if (l >= r) return;
        const m = Math.floor((l + r) / 2);
        await mergeSort(arr, l, m);
        await mergeSort(arr, m + 1, r);
        await merge(arr, l, m, r);
    }

    async function merge(arr, l, m, r) {
        const left = arr.slice(l, m + 1);
        const right = arr.slice(m + 1, r + 1);

        let i = 0, j = 0, k = l;

        while (i < left.length && j < right.length) {
            drawBars(arr, [k]);
            await new Promise(r => setTimeout(r, getSpeed()));

            if (left[i] <= right[j]) {
                arr[k++] = left[i++];
            } else {
                arr[k++] = right[j++];
            }

            drawBars(arr, [k - 1]);
            await new Promise(r => setTimeout(r, getSpeed()));
        }

        while (i < left.length) {
            arr[k++] = left[i++];
            drawBars(arr, [k - 1]);
            await new Promise(r => setTimeout(r, getSpeed()));
        }

        while (j < right.length) {
            arr[k++] = right[j++];
            drawBars(arr, [k - 1]);
            await new Promise(r => setTimeout(r, getSpeed()));
        }
    }

    async function quickSort(arr, low = 0, high = arr.length - 1) {
        if (low < high) {
            let pi = await partition(arr, low, high);
            await quickSort(arr, low, pi - 1);
            await quickSort(arr, pi + 1, high);
        }
    }

    async function partition(arr, low, high) {
        let pivot = arr[high];
        let i = low - 1;

        for (let j = low; j < high; j++) {
            drawBars(arr, [j], high);
            await new Promise(r => setTimeout(r, getSpeed()));

            if (arr[j] < pivot) {
                i++;
                [arr[i], arr[j]] = [arr[j], arr[i]];
                drawBars(arr, [i, j], high);
                await new Promise(r => setTimeout(r, getSpeed()));
            }
        }

        [arr[i + 1], arr[high]] = [arr[high], arr[i + 1]];
        drawBars(arr, [], i + 1);
        await new Promise(r => setTimeout(r, getSpeed()));

        return i + 1;
    }

    function generate() {
        let arr = [];
        const size = sizeSlider.value;

        for (let i = 0; i < size; i++) {
            arr.push(Math.floor(Math.random() * 15) + 1);
        }

        drawBars(arr);

        const algo = document.getElementById("algo").value;

        if (algo === "bubble") bubbleSort(arr);
        else if (algo === "selection") selectionSort(arr);
        else if (algo === "insertion") insertionSort(arr);
        else if (algo === "merge") mergeSort(arr);
        else if (algo === "quick") quickSort(arr);
    }
</script>

</body>
</html>
